<!-- ejs-mate layout  -->
<% layout('layout/boilerplate') -%>
<div id="map" style="width: 100%; height: 300px" class="mb-3"></div>
  <h1 class="display-5 text-primary text-uppercase text-center">all campgrounds</h1>
  <div class="container my-3 text-center">
    <div class="row justify-content-center">
      <div class="col-3">
        <a href="/campgrounds/new" class="btn btn-primary">Add New Campground</a>
      </div>
    </div>
  </div>

<!-- Displaying all campgrounds  -->
  <% for (let campground of campgrounds) { %>
    <div class="card mb-3">
      <div class="row g-0">
        <div class="col-md-4">
          <% if(campground.images.length) { %> 
          <img src="<%= campground.images[0].url %> " class="img-fluid rounded-start" alt="...">
          <% } else { %> 
          <img src="https://res.cloudinary.com/dqsjjbp5w/image/upload/v1673980358/YelpCamp/f9nypqoskoraz62rczbn.jpg" class="img-fluid rounded-start" alt="...">
            <% } %> 
        </div>
        <div class="col-md-8">
          <div class="card-body">
            <h5 class="card-title">
              <%= campground.title %>
            </h5>
            <p class="card-text">
              <%= campground.description %>
            </p>
            <p class="card-text"><small class="text-muted">$ <%= campground.price %> /night</small></p>
            <a href="campgrounds/<%= campground._id %>" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>
    </div>
  <% } %>

  <script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
    const campground = { features: <%-JSON.stringify(campgrounds)%> } ;  // passing features to matching with cluster map earthquake data
  </script>
  <script src="/js/clusterMap.js"></script>